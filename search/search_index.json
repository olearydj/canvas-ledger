{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"canvas-ledger","text":"<p>A local, queryable ledger of Canvas LMS metadata for historical analysis.</p>"},{"location":"#why-canvas-ledger","title":"Why canvas-ledger?","text":"<p>Canvas LMS is effective for answering questions about the current state of a course. But it's poor at answering historical questions:</p> <ul> <li>What courses was I involved in three years ago, and in what capacity?</li> <li>When did a student drop a course, and what was their status before dropping?</li> <li>Who was the lead instructor for a co-taught course?</li> <li>How has a student's performance changed across semesters?</li> </ul> <p>canvas-ledger gives instructors a durable, local, queryable historical record of Canvas metadata\u2014independent of Canvas's retention policies, UI limitations, and API constraints.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Local-first: Single SQLite database you own and control</li> <li>Historical accuracy: Tracks changes over time (adds, drops, grade changes)</li> <li>Dual-truth model: Preserves Canvas data exactly as reported, while allowing your annotations</li> <li>CLI-first: Scriptable, composable commands with JSON/CSV output</li> <li>Incremental ingestion: Safe to run repeatedly without duplicating data</li> </ul>"},{"location":"#quick-example","title":"Quick Example","text":"<pre><code># Configure and initialize\ncl config init\ncl db migrate\n\n# Ingest your Canvas courses\ncl ingest catalog\n\n# See your involvement timeline\ncl query my-timeline\n\n# Deep ingest a specific course\ncl ingest offering 12345\n\n# Query the roster\ncl query offering 12345\n</code></pre>"},{"location":"#getting-started","title":"Getting Started","text":"<p>See the Quickstart guide to get up and running.</p>"},{"location":"#documentation","title":"Documentation","text":"<ul> <li>Concepts \u2014 Understand the dual-truth model and design principles</li> <li>Data Model \u2014 Database schema, file locations, and what gets tracked</li> <li>Quickstart \u2014 Install, configure, and run your first queries</li> <li>Workflows \u2014 Common usage patterns by time of semester</li> <li>CLI Reference \u2014 Complete command documentation</li> </ul>"},{"location":"concepts/","title":"Concepts","text":"<p>Understanding the core ideas behind canvas-ledger.</p>"},{"location":"concepts/#the-problem-with-canvas-history","title":"The Problem with Canvas History","text":"<p>Canvas is a live system. It shows you the current state: who is enrolled now, what grades are today, what content exists currently. But instructors often need to answer historical questions:</p> <ul> <li>\"What was my teaching load in 2022?\"</li> <li>\"When did this student drop, and what was their grade at that point?\"</li> <li>\"Who was listed as instructor across all my co-taught courses?\"</li> </ul> <p>Canvas doesn't preserve this history in an accessible way. Data changes, courses archive, and the past becomes murky.</p>"},{"location":"concepts/#observed-vs-declared-truth","title":"Observed vs. Declared Truth","text":"<p>canvas-ledger maintains two kinds of facts side-by-side:</p>"},{"location":"concepts/#observed-truth","title":"Observed Truth","text":"<p>Data exactly as reported by Canvas at the time of observation.</p> <ul> <li>Never modified: Once recorded, observed data is immutable</li> <li>Timestamped: Every observation records when it was seen</li> <li>Non-destructive: Even if data disappears from Canvas, your ledger retains it</li> </ul> <p>Examples of observed truth:</p> <ul> <li>Course names, codes, and terms as Canvas reports them</li> <li>Enrollment states (active, dropped, completed)</li> <li>Grades at the time of ingestion</li> <li>Instructor assignments as Canvas lists them</li> </ul>"},{"location":"concepts/#declared-truth","title":"Declared Truth","text":"<p>Your corrections and annotations when Canvas doesn't reflect reality.</p> <ul> <li>User-controlled: You create, update, and delete these</li> <li>Survives ingestion: Re-running ingestion never overwrites your annotations</li> <li>Coexists with observed data: Both are shown in queries, clearly distinguished</li> </ul> <p>Examples of declared truth:</p> <ul> <li>Lead instructor designation (when Canvas lists multiple instructors equally)</li> <li>Your involvement classification (\"developed course\", \"guest lecturer\")</li> <li>Course aliases (grouping renumbered courses together)</li> </ul>"},{"location":"concepts/#idempotent-ingestion","title":"Idempotent Ingestion","text":"<p>You can run ingestion at any time, repeatedly, without fear:</p> <ul> <li>No duplicates: Same data produces the same result</li> <li>Drift detection: Changes are detected and recorded</li> <li>Safe re-runs: Mid-semester, end of semester, historical backfill\u2014all safe</li> </ul> <p>This means you can:</p> <ol> <li>Ingest at semester start to capture initial state</li> <li>Re-ingest mid-semester to catch adds/drops</li> <li>Re-ingest at semester end for final grades</li> <li>Backfill historical semesters anytime</li> </ol>"},{"location":"concepts/#canonical-queries","title":"Canonical Queries","text":"<p>canvas-ledger is designed to answer seven core questions:</p> Query Purpose Q1: My Timeline What courses have I been involved in, when, and in what capacity? Q2: Person History For a given person, what offerings were they in, and what role/state? Q3: Performance Summary For a given person, how did they do across offerings? Q4: Responsibility Clarity Who was lead instructor vs. other instructors? Q5: Roster Snapshot Who was enrolled in an offering, by section and role? Q6: Enrollment Drift What changed over time (adds, drops, state transitions)? Q7: Course Identity How to view history coherently across course renumbering?"},{"location":"concepts/#local-inspectable-durable","title":"Local, Inspectable, Durable","text":"<p>Your ledger is a single SQLite file:</p> <ul> <li>Local: No cloud dependencies (beyond Canvas API for ingestion)</li> <li>Inspectable: Open it with any SQLite tool</li> <li>Portable: Copy it, back it up, version control it</li> <li>Durable: Standard format that will be readable for decades</li> </ul> <p>The default location is <code>~/.local/share/cl/ledger.db</code>, but you can configure any path.</p>"},{"location":"concepts/#schema-evolution","title":"Schema Evolution","text":"<p>The database schema will change as canvas-ledger grows. Migrations are:</p> <ul> <li>Forward-only: No rollbacks needed</li> <li>Automatic: Run on first use after upgrade</li> <li>Backed up: Database copied before each migration</li> </ul> <p>You don't need to think about migrations\u2014they just work.</p>"},{"location":"data-model/","title":"Data Model","text":"<p>Understanding what canvas-ledger tracks and where it stores data.</p>"},{"location":"data-model/#file-locations","title":"File Locations","text":"<p>canvas-ledger stores all data locally. Here's where everything lives:</p> File Default Location Purpose Configuration <code>~/.config/cl/config.toml</code> Canvas URL, database path, preferences Database <code>~/.local/share/cl/ledger.db</code> All observed and declared data Backups <code>~/.local/share/cl/ledger.db.backup.*</code> Auto-created before migrations <p>Custom Locations</p> <p>You can customize the database path in your config file: <pre><code>[database]\npath = \"/path/to/your/ledger.db\"\n</code></pre></p>"},{"location":"data-model/#whats-in-the-config-file","title":"What's in the Config File","text":"<pre><code># ~/.config/cl/config.toml\n[canvas]\nbase_url = \"https://auburn.instructure.com\"\n\n[database]\npath = \"~/.local/share/cl/ledger.db\"\n\n[secrets]\nprovider = \"env\"  # or \"1password\"\n</code></pre> <p>Tokens Are Never Stored Here</p> <p>Your Canvas API token is retrieved from environment variables (<code>CANVAS_API_TOKEN</code>) or 1Password\u2014never written to the config file.</p>"},{"location":"data-model/#database-file","title":"Database File","text":"<p>The database is a standard SQLite file. You can:</p> <ul> <li>Back it up: Just copy the file</li> <li>Inspect it: Open with any SQLite tool (DB Browser, <code>sqlite3</code> CLI, etc.)</li> <li>Move it: Copy to another machine and update your config</li> <li>Version control it: If you want history of your ledger itself</li> </ul>"},{"location":"data-model/#entity-relationship-diagram","title":"Entity Relationship Diagram","text":"<pre><code>erDiagram\n    Term ||--o{ Offering : \"has\"\n    Offering ||--o{ Section : \"contains\"\n    Offering ||--o{ UserEnrollment : \"your roles\"\n    Offering ||--o{ Enrollment : \"all enrollments\"\n    Section ||--o{ Enrollment : \"assigned to\"\n    Person ||--o{ Enrollment : \"enrolled as\"\n    IngestRun ||--o{ ChangeLog : \"records\"\n\n    CourseAlias ||--o{ CourseAliasOffering : \"groups\"\n    Offering ||--o{ CourseAliasOffering : \"belongs to\"\n\n    Term {\n        int canvas_term_id PK\n        string name\n        datetime start_date\n        datetime end_date\n    }\n\n    Offering {\n        int canvas_course_id PK\n        string name\n        string code\n        int term_id FK\n        string workflow_state\n    }\n\n    Section {\n        int canvas_section_id PK\n        int offering_id FK\n        string name\n        string sis_section_id\n    }\n\n    Person {\n        int canvas_user_id PK\n        string name\n        string sortable_name\n        string sis_user_id\n        string login_id\n    }\n\n    UserEnrollment {\n        int canvas_enrollment_id PK\n        int offering_id FK\n        string role\n        string enrollment_state\n    }\n\n    Enrollment {\n        int canvas_enrollment_id PK\n        int offering_id FK\n        int section_id FK\n        int person_id FK\n        string role\n        string enrollment_state\n        string current_grade\n        float current_score\n        string final_grade\n        float final_score\n    }\n\n    IngestRun {\n        int id PK\n        datetime started_at\n        datetime completed_at\n        string scope\n        string status\n        int drift_count\n    }\n\n    ChangeLog {\n        int id PK\n        string entity_type\n        int entity_canvas_id\n        string field_name\n        string old_value\n        string new_value\n        int ingest_run_id FK\n    }\n\n    CourseAlias {\n        int id PK\n        string name UK\n        string description\n    }\n\n    CourseAliasOffering {\n        int id PK\n        int alias_id FK\n        int offering_canvas_id\n    }</code></pre>"},{"location":"data-model/#observed-data-from-canvas","title":"Observed Data (from Canvas)","text":"<p>These entities store data exactly as Canvas reports it.</p>"},{"location":"data-model/#term","title":"Term","text":"<p>Academic periods (semesters, quarters, etc.).</p> Field Description <code>canvas_term_id</code> Canvas's unique identifier <code>name</code> Term name (e.g., \"Fall 2024\") <code>start_date</code> / <code>end_date</code> Term boundaries <code>observed_at</code> When first seen <code>last_seen_at</code> When last confirmed"},{"location":"data-model/#offering","title":"Offering","text":"<p>A specific course instance (what Canvas calls a \"course\").</p> Field Description <code>canvas_course_id</code> Canvas's unique identifier <code>name</code> Course title <code>code</code> Course code (e.g., \"COMP 1234\") <code>term_id</code> Link to Term <code>workflow_state</code> Status: available, completed, deleted"},{"location":"data-model/#section","title":"Section","text":"<p>Subdivisions within an offering.</p> Field Description <code>canvas_section_id</code> Canvas's unique identifier <code>name</code> Section name (e.g., \"Section 001\") <code>sis_section_id</code> Institutional identifier if available"},{"location":"data-model/#person","title":"Person","text":"<p>Any user encountered through enrollments.</p> Field Description <code>canvas_user_id</code> Canvas's unique identifier <code>name</code> Display name <code>sortable_name</code> Last, First format <code>sis_user_id</code> Institutional ID (e.g., student ID) <code>login_id</code> Login username"},{"location":"data-model/#enrollment","title":"Enrollment","text":"<p>A person's enrollment in an offering (deep ingestion).</p> Field Description <code>canvas_enrollment_id</code> Canvas's unique identifier <code>role</code> Role type: StudentEnrollment, TeacherEnrollment, TaEnrollment, etc. <code>enrollment_state</code> Status: active, invited, completed, deleted <code>current_grade</code> Letter grade as of ingestion (e.g., \"B+\") <code>current_score</code> Numeric score as of ingestion (e.g., 87.5) <code>final_grade</code> Final letter grade if concluded <code>final_score</code> Final numeric score if concluded"},{"location":"data-model/#userenrollment","title":"UserEnrollment","text":"<p>Your own enrollments (catalog ingestion only).</p> Field Description <code>role</code> Your role: teacher, ta, student, designer, observer <code>enrollment_state</code> Status: active, completed, etc. <p>This is a lightweight version of Enrollment, populated during catalog ingestion before you deep-ingest specific offerings.</p>"},{"location":"data-model/#declared-data-your-annotations","title":"Declared Data (Your Annotations)","text":"<p>These entities store your corrections and classifications.</p>"},{"location":"data-model/#leadinstructorannotation","title":"LeadInstructorAnnotation","text":"<p>Declares who was lead/grade-responsible for an offering.</p> Field Description <code>offering_canvas_id</code> Which offering <code>person_canvas_id</code> Who is lead <code>designation</code> \"lead\" or \"grade_responsible\""},{"location":"data-model/#involvementannotation","title":"InvolvementAnnotation","text":"<p>Classifies your involvement beyond what Canvas shows.</p> Field Description <code>offering_canvas_id</code> Which offering <code>classification</code> Free text: \"developed course\", \"guest lecturer\", etc."},{"location":"data-model/#coursealias","title":"CourseAlias","text":"<p>Groups related offerings under a common name.</p> Field Description <code>name</code> The alias (e.g., \"intro-computing\") <code>description</code> Optional explanation"},{"location":"data-model/#coursealiasoffering","title":"CourseAliasOffering","text":"<p>Links offerings to aliases (many-to-many).</p> Field Description <code>alias_id</code> Which alias <code>offering_canvas_id</code> Which offering"},{"location":"data-model/#history-tracking","title":"History Tracking","text":""},{"location":"data-model/#ingestrun","title":"IngestRun","text":"<p>Metadata about each ingestion operation.</p> Field Description <code>scope</code> \"catalog\" or \"offering\" <code>scope_detail</code> For offerings: which course ID <code>status</code> running, completed, failed <code>new_count</code> Records created <code>updated_count</code> Records modified <code>unchanged_count</code> Records unchanged <code>drift_count</code> Changes detected"},{"location":"data-model/#changelog","title":"ChangeLog","text":"<p>Records every field change across ingestion runs.</p> Field Description <code>entity_type</code> What changed: term, offering, enrollment, etc. <code>entity_canvas_id</code> Canvas ID of the changed entity <code>field_name</code> Which field changed <code>old_value</code> Previous value <code>new_value</code> New value <code>ingest_run_id</code> Which ingestion detected this <p>This enables drift queries like \"what changed for this student?\" or \"what changed in this course?\"</p>"},{"location":"data-model/#timestamps","title":"Timestamps","text":"<p>Every observed entity includes:</p> <ul> <li><code>observed_at</code>: When the record was first created</li> <li><code>last_seen_at</code>: When the record was last confirmed in Canvas</li> </ul> <p>If <code>last_seen_at</code> is old while other records are recent, the entity may have been removed from Canvas (but is preserved in your ledger).</p>"},{"location":"data-model/#canvas-ids-vs-internal-ids","title":"Canvas IDs vs Internal IDs","text":"<p>Annotations reference Canvas IDs (not internal database IDs). This means:</p> <ul> <li>Annotations survive if you delete and re-ingest offerings</li> <li>You can add annotations for users not yet in your ledger</li> <li>The ledger remains portable across database rebuilds</li> </ul>"},{"location":"data-model/#inspecting-the-database","title":"Inspecting the Database","text":"<pre><code># Open with sqlite3 CLI\nsqlite3 ~/.local/share/cl/ledger.db\n\n# List tables\n.tables\n\n# See schema\n.schema offering\n\n# Query directly\nSELECT name, code FROM offering WHERE code LIKE 'COMP%';\n</code></pre> <p>Or use a GUI tool like DB Browser for SQLite.</p>"},{"location":"quickstart/","title":"Quickstart","text":"<p>Get canvas-ledger running in five minutes.</p>"},{"location":"quickstart/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.13+</li> <li>Access to Canvas LMS with an API token</li> <li>uv for Python environment management</li> </ul>"},{"location":"quickstart/#installation","title":"Installation","text":"<pre><code># Clone the repository\ngit clone https://github.com/olearydj/canvas-ledger.git\ncd canvas-ledger\n\n# Install with uv\nuv sync\n\n# Verify installation\nuv run cl --version\n</code></pre>"},{"location":"quickstart/#configuration","title":"Configuration","text":""},{"location":"quickstart/#step-1-get-your-canvas-api-token","title":"Step 1: Get Your Canvas API Token","text":"<ol> <li>Log into Canvas</li> <li>Go to Account \u2192 Settings</li> <li>Scroll to \"Approved Integrations\"</li> <li>Click \"+ New Access Token\"</li> <li>Give it a name (e.g., \"canvas-ledger\") and generate</li> <li>Copy the token (you won't see it again!)</li> </ol>"},{"location":"quickstart/#step-2-configure-canvas-ledger","title":"Step 2: Configure canvas-ledger","text":"<pre><code>uv run cl config init\n</code></pre> <p>This will prompt you for:</p> <ul> <li>Canvas URL: Your institution's Canvas URL (e.g., <code>https://auburn.instructure.com</code>)</li> <li>API Token: The token you generated above</li> </ul> <p>Token Storage</p> <p>The token is stored securely\u2014not in the config file. canvas-ledger supports environment variables (<code>CANVAS_API_TOKEN</code>) or 1Password integration.</p>"},{"location":"quickstart/#step-3-initialize-the-database","title":"Step 3: Initialize the Database","text":"<pre><code>uv run cl db migrate\n</code></pre> <p>This creates the SQLite database with all required tables.</p>"},{"location":"quickstart/#your-first-ingestion","title":"Your First Ingestion","text":""},{"location":"quickstart/#ingest-your-course-catalog","title":"Ingest Your Course Catalog","text":"<pre><code>uv run cl ingest catalog\n</code></pre> <p>This retrieves all courses visible to you in Canvas (any role: instructor, TA, student, etc.) and stores them locally.</p> <p>Example output: <pre><code>Ingesting catalog from Canvas...\nRetrieved 274 courses\nNew: 274 | Updated: 0 | Unchanged: 0\nCatalog ingestion complete.\n</code></pre></p>"},{"location":"quickstart/#query-your-timeline","title":"Query Your Timeline","text":"<pre><code>uv run cl query my-timeline\n</code></pre> <p>See every course you've been involved in, with terms and roles.</p> <p>Example output: <pre><code>My Involvement Timeline\n=======================\n\nFall 2024\n  COMP 1234 - Introduction to Computing\n    Role: TeacherEnrollment | State: active\n\nSpring 2024\n  COMP 5678 - Advanced Topics\n    Role: TeacherEnrollment | State: completed\n  ...\n</code></pre></p>"},{"location":"quickstart/#export-as-json","title":"Export as JSON","text":"<pre><code>uv run cl query my-timeline --format json\n</code></pre> <p>Pipe to <code>jq</code>, save to file, or process programmatically.</p>"},{"location":"quickstart/#deep-ingestion","title":"Deep Ingestion","text":"<p>For detailed roster and enrollment data, deep-ingest specific offerings:</p> <pre><code># Get the Canvas course ID from your timeline or Canvas URL\nuv run cl ingest offering 12345\n</code></pre> <p>This fetches:</p> <ul> <li>All sections in the course</li> <li>All enrollments (students, TAs, instructors)</li> <li>Grade data (current and final)</li> <li>Person details for each enrollee</li> </ul> <p>Now you can query rosters:</p> <pre><code># See who was enrolled\nuv run cl query offering 12345\n\n# See instructor assignments\nuv run cl query offering 12345 --instructors\n\n# Query a specific person's history\nuv run cl query person 67890\n</code></pre>"},{"location":"quickstart/#adding-annotations","title":"Adding Annotations","text":"<p>When Canvas doesn't reflect reality, add your own truth:</p> <pre><code># Mark yourself as lead instructor\nuv run cl annotate lead 12345 11111\n\n# Add your involvement classification\nuv run cl annotate involvement 12345 \"Developed course materials\"\n\n# See your annotations\nuv run cl annotate list\n</code></pre>"},{"location":"quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Read Concepts to understand the dual-truth model</li> <li>See Workflows for seasonal usage patterns</li> <li>Explore the CLI Reference for all commands</li> </ul>"},{"location":"cli/reference/","title":"CLI Reference","text":"<p>Complete documentation for all canvas-ledger commands.</p> <p>This reference is auto-generated from the CLI source code.</p>"},{"location":"cli/reference/#cl","title":"cl","text":"<p>canvas-ledger: A local, queryable ledger of Canvas LMS metadata.</p> <p>Build a durable historical record of your Canvas courses, enrollments, and roles. Answer questions that Canvas itself cannot easily answer:</p> <p>\u2022 What courses have I taught or taken, and when? \u2022 What was a student's enrollment history across my courses? \u2022 Who was the lead instructor for a co-taught course? \u2022 How did enrollment change over time (adds, drops)? \u2022 How did a student perform across multiple courses?</p> <p>Data is stored locally in SQLite. Canvas is read-only\u2014this tool never modifies your Canvas data. You can annotate records with \"declared truth\" (like who was really the lead instructor) without changing what Canvas reports.</p> <p>Getting Started:   1. cl config init        Configure Canvas URL and API token   2. cl db migrate         Initialize the local database   3. cl ingest catalog     Fetch all your Canvas courses   4. cl query my-timeline  See your involvement history</p>"},{"location":"cli/reference/#usage","title":"Usage","text":"<p><code>cl [OPTIONS] COMMAND [ARGS]...</code></p>"},{"location":"cli/reference/#arguments","title":"Arguments","text":"<p>No arguments available</p>"},{"location":"cli/reference/#options","title":"Options","text":"Name Description Required Default <code>-V, --version</code> Show version and exit. No - <code>-v, --verbose</code> Enable verbose/debug output. No - <code>--help</code> Show this message and exit. No -"},{"location":"cli/reference/#commands","title":"Commands","text":"Name Description <code>config</code> Manage canvas-ledger configuration. <code>db</code> Database operations for canvas-ledger. <code>ingest</code> Ingest data from Canvas into the local... <code>query</code> Query the local ledger for historical... <code>export</code> Export data in JSON or CSV for use by... <code>annotate</code> Manage annotations (your declared truth vs..."},{"location":"cli/reference/#sub-commands","title":"Sub Commands","text":""},{"location":"cli/reference/#cl-config","title":"<code>cl config</code>","text":"<p>Manage canvas-ledger configuration.</p> <p>Configuration is stored in ~/.config/cl/config.toml. API tokens are NEVER stored in the config file\u2014use environment variables or 1Password.</p> <p>Start here: Run 'cl config init' to set up your Canvas URL and token source.</p>"},{"location":"cli/reference/#usage_1","title":"Usage","text":"<p><code>cl config set [OPTIONS] KEY VALUE</code></p>"},{"location":"cli/reference/#arguments_1","title":"Arguments","text":"Name Description Required <code>KEY</code> Configuration key to set. Yes <code>VALUE</code> Value to set. Yes"},{"location":"cli/reference/#options_1","title":"Options","text":"Name Description Required Default <code>--help</code> Show this message and exit. No - <code>-u, --canvas-url TEXT</code> Canvas base URL (e.g., https://canvas.institution.edu) No - <code>-d, --db-path PATH</code> Path to SQLite database file. No - <code>-s, --secret-provider TEXT</code> Secret provider for API token (env or 1password). No - <code>-o, --op-reference TEXT</code> 1Password reference (e.g., op://Dev/Canvas/credential). No - <code>-f, --force</code> Overwrite existing configuration. No - <code>--help</code> Show this message and exit. No - <code>-r, --reveal</code> Show secret provider status (never reveals actual tokens). No - <code>--help</code> Show this message and exit. No - <code>--help</code> Show this message and exit. No -"},{"location":"cli/reference/#cl-db","title":"<code>cl db</code>","text":"<p>Database operations for canvas-ledger.</p> <p>The ledger is stored in a local SQLite database (~/.local/share/cl/ledger.db by default). Run 'cl db migrate' after first install and after updates to ensure the schema is current.</p>"},{"location":"cli/reference/#usage_2","title":"Usage","text":"<p><code>cl db status [OPTIONS]</code></p>"},{"location":"cli/reference/#arguments_2","title":"Arguments","text":"<p>No arguments available</p>"},{"location":"cli/reference/#options_2","title":"Options","text":"Name Description Required Default <code>--help</code> Show this message and exit. No - <code>--no-backup</code> Skip automatic backup before migration. No - <code>--help</code> Show this message and exit. No - <code>--help</code> Show this message and exit. No -"},{"location":"cli/reference/#cl-ingest","title":"<code>cl ingest</code>","text":"<p>Ingest data from Canvas into the local ledger.</p> <p>Ingestion has two levels:</p> <p>CATALOG   'cl ingest catalog' fetches all courses visible to you\u2014names,             codes, terms, and your role. Fast and safe to run anytime.   OFFERING  'cl ingest offering ' fetches full details for one course\u2014             sections, enrollments, grades. Use for courses you query deeply. <p>All ingestion is read-only and idempotent. Re-running updates records and tracks changes (\"drift\") over time.</p>"},{"location":"cli/reference/#usage_3","title":"Usage","text":"<p><code>cl ingest status [OPTIONS]</code></p>"},{"location":"cli/reference/#arguments_3","title":"Arguments","text":"Name Description Required <code>OFFERING_ID</code> Canvas course ID of the offering to deep ingest. Yes"},{"location":"cli/reference/#options_3","title":"Options","text":"Name Description Required Default <code>--help</code> Show this message and exit. No - <code>-q, --quiet</code> Suppress detailed output. No - <code>--help</code> Show this message and exit. No - <code>-q, --quiet</code> Suppress detailed output. No - <code>--help</code> Show this message and exit. No - <code>-f, --format TEXT</code> Output format (table, json).  [default: table] No - <code>--help</code> Show this message and exit. No -"},{"location":"cli/reference/#cl-query","title":"<code>cl query</code>","text":"<p>Query the local ledger for historical Canvas data. All queries support --format json|csv|table. Data comes from your local ledger\u2014no Canvas API calls.</p>"},{"location":"cli/reference/#usage_4","title":"Usage","text":"<p><code>cl query drift offering [OPTIONS] OFFERING_ID</code></p>"},{"location":"cli/reference/#arguments_4","title":"Arguments","text":"Name Description Required <code>OFFERING_ID</code> Canvas course ID of the offering. Yes <code>PERSON_ID</code> Canvas user ID of the person. Yes <code>ALIAS_NAME</code> Name of the alias to query. Yes <code>PERSON_ID</code> Canvas user ID of the person. Yes <code>OFFERING_ID</code> Canvas course ID of the offering. Yes"},{"location":"cli/reference/#options_4","title":"Options","text":"Name Description Required Default <code>--help</code> Show this message and exit. No - <code>-f, --format [json|csv|table]</code> Output format.  [default: table] No - <code>-t, --term TEXT</code> Filter by term name (case-insensitive contains match). No - <code>-r, --role TEXT</code> Filter by role (exact match: teacher, ta, student, etc.). No - <code>--help</code> Show this message and exit. No - <code>-i, --instructors</code> Show instructor responsibility information. No - <code>-r, --roster</code> Show full roster grouped by section (requires deep ingestion). No - <code>-f, --format [json|csv|table]</code> Output format.  [default: table] No - <code>--help</code> Show this message and exit. No - <code>-g, --grades</code> Show performance summary (grades only, student enrollments). No - <code>-a, --alias TEXT</code> Filter enrollments to offerings in this alias only. No - <code>-f, --format [json|csv|table]</code> Output format.  [default: table] No - <code>--help</code> Show this message and exit. No - <code>-f, --format [json|csv|table]</code> Output format.  [default: table] No - <code>--help</code> Show this message and exit. No - <code>--help</code> Show this message and exit. No - <code>-f, --format [json|csv|table]</code> Output format.  [default: table] No - <code>--help</code> Show this message and exit. No - <code>-f, --format [json|csv|table]</code> Output format.  [default: table] No - <code>--help</code> Show this message and exit. No -"},{"location":"cli/reference/#cl-export","title":"<code>cl export</code>","text":"<p>Export data in JSON or CSV for use by other tools. Output goes to stdout for piping to files or other commands.</p>"},{"location":"cli/reference/#usage_5","title":"Usage","text":"<p><code>cl export person [OPTIONS] PERSON_ID</code></p>"},{"location":"cli/reference/#arguments_5","title":"Arguments","text":"Name Description Required <code>OFFERING_ID</code> Canvas course ID of the offering. Yes <code>PERSON_ID</code> Canvas user ID of the person. Yes"},{"location":"cli/reference/#options_5","title":"Options","text":"Name Description Required Default <code>--help</code> Show this message and exit. No - <code>-f, --format [json|csv]</code> Output format.  [default: json] No - <code>--help</code> Show this message and exit. No - <code>-f, --format [json|csv]</code> Output format.  [default: json] No - <code>--help</code> Show this message and exit. No - <code>-f, --format [json|csv]</code> Output format.  [default: json] No - <code>--help</code> Show this message and exit. No -"},{"location":"cli/reference/#cl-annotate","title":"<code>cl annotate</code>","text":"<p>Manage annotations (your declared truth vs Canvas observed truth). Record corrections without changing what Canvas reports\u2014both views are preserved.</p>"},{"location":"cli/reference/#usage_6","title":"Usage","text":"<p><code>cl annotate alias show [OPTIONS] NAME</code></p>"},{"location":"cli/reference/#arguments_6","title":"Arguments","text":"Name Description Required <code>OFFERING_ID</code> Canvas course ID of the offering. Yes <code>PERSON_ID</code> Canvas user ID of the lead instructor. Yes <code>OFFERING_ID</code> Canvas course ID of the offering. Yes <code>CLASSIFICATION</code> Involvement classification (e.g., 'developed course'). Yes <code>ANNOTATION_ID</code> ID of the annotation to remove. Yes <code>NAME</code> Name for the alias (e.g., 'BET 3510'). Yes <code>[OFFERING_IDS]...</code> Optional Canvas course IDs to include initially. No <code>NAME</code> Name of the existing alias. Yes <code>OFFERING_ID</code> Canvas course ID to add to the alias. Yes <code>NAME</code> Name of the alias. Yes <code>OFFERING_ID</code> Canvas course ID to remove from the alias. Yes <code>NAME</code> Name of the alias to delete. Yes <code>NAME</code> Name of the alias to show. Yes"},{"location":"cli/reference/#options_6","title":"Options","text":"Name Description Required Default <code>--help</code> Show this message and exit. No - <code>-d, --designation TEXT</code> Designation type: 'lead' or 'grade_responsible'.  [default: lead] No - <code>--help</code> Show this message and exit. No - <code>--help</code> Show this message and exit. No - <code>-o, --offering INTEGER</code> Filter by Canvas course ID. No - <code>-f, --format TEXT</code> Output format (table, json, csv).  [default: table] No - <code>--help</code> Show this message and exit. No - <code>-t, --type TEXT</code> Type of annotation: 'lead_instructor' or 'involvement'.  [default: lead_instructor] No - <code>-y, --force</code> Skip confirmation prompt. No - <code>--help</code> Show this message and exit. No - <code>--help</code> Show this message and exit. No - <code>-d, --description TEXT</code> Optional description of the alias. No - <code>--help</code> Show this message and exit. No - <code>--help</code> Show this message and exit. No - <code>--help</code> Show this message and exit. No - <code>-y, --force</code> Skip confirmation prompt. No - <code>--help</code> Show this message and exit. No - <code>-f, --format TEXT</code> Output format (table, json, csv).  [default: table] No - <code>--help</code> Show this message and exit. No - <code>-f, --format TEXT</code> Output format (table, json, csv).  [default: table] No - <code>--help</code> Show this message and exit. No -"},{"location":"workflows/mid-semester/","title":"Mid-Semester Workflow","text":"<p>Catching enrollment changes during the add/drop period and beyond.</p>"},{"location":"workflows/mid-semester/#goals","title":"Goals","text":"<ul> <li>Capture enrollment changes (adds, drops, withdrawals)</li> <li>Update grade snapshots</li> <li>Track roster evolution</li> </ul>"},{"location":"workflows/mid-semester/#when-to-run","title":"When to Run","text":"<ul> <li>After add/drop deadline</li> <li>After withdrawal deadline</li> <li>Before midterm grade submission</li> <li>Any time you need current data</li> </ul>"},{"location":"workflows/mid-semester/#steps","title":"Steps","text":""},{"location":"workflows/mid-semester/#1-re-ingest-your-courses","title":"1. Re-Ingest Your Courses","text":"<pre><code># Re-ingest catalog to catch any new course assignments\nuv run cl ingest catalog\n\n# Re-ingest offerings you're tracking\nuv run cl ingest offering 12345\n</code></pre> <p>The ingestion is idempotent\u2014running it multiple times is safe and expected.</p>"},{"location":"workflows/mid-semester/#2-check-for-drift","title":"2. Check for Drift","text":"<p>After ingestion, see what changed:</p> <pre><code># See enrollment changes for a course\nuv run cl query drift offering 12345\n\n# See changes for a specific student\nuv run cl query drift person 67890\n</code></pre> <p>Example output: <pre><code>Drift for Offering 12345\n========================\n2025-02-15 14:30:00\n  Person 67890: enrollment_state changed from 'active' to 'deleted'\n  Person 11111: NEW enrollment (StudentEnrollment, active)\n\n2025-01-20 09:15:00\n  Person 22222: current_score changed from 85.0 to 78.5\n</code></pre></p>"},{"location":"workflows/mid-semester/#3-review-ingestion-status","title":"3. Review Ingestion Status","text":"<pre><code>uv run cl ingest status\n</code></pre> <p>See summary of the last ingestion run, including drift counts.</p>"},{"location":"workflows/mid-semester/#understanding-drift","title":"Understanding Drift","text":"<p>Drift detection tracks changes between ingestion runs:</p> Change Type What It Means <code>enrollment_state: active \u2192 deleted</code> Student dropped or was removed <code>enrollment_state: active \u2192 completed</code> Course concluded for this student <code>NEW enrollment</code> Student added after initial roster <code>current_score</code> changed Grade updated <code>role</code> changed Role modified (rare)"},{"location":"workflows/mid-semester/#grade-snapshots","title":"Grade Snapshots","text":"<p>Each ingestion captures current grade data. Over time, you build a history:</p> <pre><code># See a person's grades with history\nuv run cl query person 67890 --grades\n</code></pre> <p>This shows the most recent grades. Drift queries reveal how grades changed between ingestion runs.</p>"},{"location":"workflows/mid-semester/#tips","title":"Tips","text":"<p>Regular Cadence</p> <p>Consider a weekly or bi-weekly ingestion schedule during active semesters to maintain good drift granularity.</p> <p>API Rate Limits</p> <p>Deep ingestion makes many API calls. For courses with hundreds of students, expect ingestion to take a minute or two. Canvas rate limits are handled automatically.</p>"},{"location":"workflows/retrospective/","title":"Retrospective Workflow","text":"<p>Using your ledger for annual reviews, teaching portfolios, and historical analysis.</p>"},{"location":"workflows/retrospective/#goals","title":"Goals","text":"<ul> <li>Answer questions about past teaching</li> <li>Generate data for annual reviews</li> <li>Support letters of recommendation</li> <li>Analyze teaching patterns over time</li> </ul>"},{"location":"workflows/retrospective/#common-queries","title":"Common Queries","text":""},{"location":"workflows/retrospective/#teaching-history-report","title":"Teaching History Report","text":"<pre><code># Full timeline as JSON for processing\nuv run cl query my-timeline --format json &gt; teaching-history.json\n\n# Filter to a specific term\nuv run cl query my-timeline --format json | jq '.[] | select(.term | contains(\"2024\"))'\n</code></pre>"},{"location":"workflows/retrospective/#student-lookup","title":"Student Lookup","text":"<p>When writing a letter of recommendation:</p> <pre><code># Find all courses where a student was enrolled\nuv run cl query person 67890\n\n# Include their grades\nuv run cl query person 67890 --grades\n</code></pre> <p>Example output: <pre><code>Person History: Jane Student (67890)\n====================================\n\nFall 2024 - COMP 1234: Introduction to Computing\n  Section: Section 001\n  Role: StudentEnrollment\n  State: completed\n  Final Grade: A\n\nSpring 2024 - COMP 2345: Data Structures\n  Section: Section 002\n  Role: StudentEnrollment\n  State: completed\n  Final Grade: A-\n</code></pre></p>"},{"location":"workflows/retrospective/#course-rosters","title":"Course Rosters","text":"<p>For historical course records:</p> <pre><code># Get the final roster for a past course\nuv run cl query offering 12345 --format csv &gt; roster-fall-2024.csv\n</code></pre>"},{"location":"workflows/retrospective/#lead-instructor-verification","title":"Lead Instructor Verification","text":"<p>For tenure/promotion documentation:</p> <pre><code># See all offerings where you declared lead instructor\nuv run cl annotate list | grep \"lead\"\n\n# Query specific offering responsibility\nuv run cl query offering 12345 --instructors\n</code></pre>"},{"location":"workflows/retrospective/#backfilling-historical-data","title":"Backfilling Historical Data","text":"<p>If you're just starting with canvas-ledger, you can backfill:</p> <pre><code># Ingest catalog to get all visible courses (including past terms)\nuv run cl ingest catalog\n\n# Deep ingest important historical courses\nuv run cl ingest offering 11111  # Fall 2023 course\nuv run cl ingest offering 22222  # Spring 2023 course\n</code></pre> <p>Historical Limitations</p> <p>Canvas may not retain full enrollment history for very old courses. You'll capture what's still available.</p>"},{"location":"workflows/retrospective/#course-aliasing","title":"Course Aliasing","text":"<p>For courses that have been renumbered:</p> <pre><code># Create an alias for a course that was renumbered\nuv run cl annotate alias create \"intro-computing\" 12345 23456 34567\n\n# Query across all versions\nuv run cl query alias \"intro-computing\"\n</code></pre> <p>This groups COMP 1000 (old number), COMP 1100 (renumbered), and COMP 1200 (renumbered again) under one logical identity.</p>"},{"location":"workflows/retrospective/#export-for-external-use","title":"Export for External Use","text":"<pre><code># Export offerings for spreadsheet analysis\nuv run cl export offerings --format csv &gt; all-offerings.csv\n\n# Export a course roster\nuv run cl export enrollments 12345 --format csv &gt; roster.csv\n\n# Export person history\nuv run cl export person 67890 --format json &gt; student-record.json\n</code></pre>"},{"location":"workflows/retrospective/#data-integrity","title":"Data Integrity","text":"<p>Your ledger is a durable historical record:</p> <ul> <li>Observed data is never deleted: Even if Canvas removes a course</li> <li>Annotations persist: Your declarations survive any re-ingestion</li> <li>Timestamps preserved: Know exactly when each observation was made</li> </ul> <p>Back up your database file (<code>~/.local/share/cl/ledger.db</code>) periodically for additional safety.</p>"},{"location":"workflows/semester-start/","title":"Semester Start Workflow","text":"<p>What to do at the beginning of each semester.</p>"},{"location":"workflows/semester-start/#goals","title":"Goals","text":"<ul> <li>Capture initial course assignments</li> <li>Record your role declarations before the semester gets busy</li> <li>Establish baseline for drift detection</li> </ul>"},{"location":"workflows/semester-start/#steps","title":"Steps","text":""},{"location":"workflows/semester-start/#1-update-your-catalog","title":"1. Update Your Catalog","text":"<pre><code>uv run cl ingest catalog\n</code></pre> <p>This picks up any new courses assigned to you for the upcoming term.</p>"},{"location":"workflows/semester-start/#2-deep-ingest-your-teaching-courses","title":"2. Deep Ingest Your Teaching Courses","text":"<p>For courses you're teaching (not just enrolled in), deep-ingest to capture the initial roster:</p> <pre><code># Ingest each course you're teaching\nuv run cl ingest offering 12345\nuv run cl ingest offering 12346\n</code></pre> <p>Finding Course IDs</p> <p>Course IDs appear in Canvas URLs: <code>https://canvas.edu/courses/12345</code></p> <p>Or query your timeline and look at the output.</p>"},{"location":"workflows/semester-start/#3-declare-lead-instructor","title":"3. Declare Lead Instructor","text":"<p>For co-taught courses, record who is lead/grade-responsible:</p> <pre><code># Mark yourself as lead instructor\nuv run cl annotate lead 12345 YOUR_CANVAS_USER_ID\n</code></pre> <p>This annotation survives future ingestion runs and appears in queries alongside Canvas-reported instructor data.</p>"},{"location":"workflows/semester-start/#4-add-involvement-notes","title":"4. Add Involvement Notes","text":"<p>Optionally classify your involvement:</p> <pre><code>uv run cl annotate involvement 12345 \"Lead instructor, developed all materials\"\nuv run cl annotate involvement 12346 \"Co-instructor, handled labs\"\n</code></pre>"},{"location":"workflows/semester-start/#5-verify-your-setup","title":"5. Verify Your Setup","text":"<pre><code># Check your timeline includes the new term\nuv run cl query my-timeline --format json | jq '.[] | select(.term | contains(\"Spring 2025\"))'\n\n# Verify annotations are recorded\nuv run cl annotate list\n</code></pre>"},{"location":"workflows/semester-start/#what-youve-accomplished","title":"What You've Accomplished","text":"<p>At semester start, your ledger now contains:</p> <ul> <li>All your course assignments for the new term</li> <li>Initial rosters for courses you're teaching</li> <li>Lead instructor declarations for co-taught courses</li> <li>Your involvement classifications</li> </ul> <p>When you re-ingest mid-semester, the system will detect any changes (adds, drops, role changes) and record them as drift.</p>"}]}